## ADDED Requirements

### Requirement: 城市模糊搜索
系统 MUST 提供本地城市模糊搜索功能，当用户在城市输入框中输入内容时，SHALL 实时显示匹配的城市列表。

#### Scenario: 汉字搜索
- **WHEN** 用户输入汉字（如"北京"、"上海"）
- **THEN** 系统显示包含该汉字的城市列表
- **AND** 结果按匹配度排序
- **AND** 显示 3-5 个最相关的结果

#### Scenario: 拼音搜索
- **WHEN** 用户输入拼音（如"beijing"、"shanghai"）
- **THEN** 系统显示拼音匹配的城市列表
- **AND** 支持全拼和首字母缩写（如"bj"匹配"北京"）

#### Scenario: 英文搜索
- **WHEN** 用户输入英文城市名（如"Tokyo"、"New York"）
- **THEN** 系统显示英文名匹配的城市列表

### Requirement: 城市显示格式
系统 MUST 以统一格式显示城市信息，格式 SHALL 为"城市名, 省份/州名, 国家名"。

#### Scenario: 中国城市显示
- **WHEN** 显示中国大陆城市
- **THEN** 格式为"城市, 省份, 中国"
- **AND** 示例："北京, 北京, 中国"、"杭州, 浙江, 中国"

#### Scenario: 台湾城市显示
- **WHEN** 显示台湾地区城市
- **THEN** 格式为"城市, 台湾, 中国"
- **AND** 国家字段 MUST 显示为"中国"

#### Scenario: 国际城市显示
- **WHEN** 显示国际城市
- **THEN** 格式为"城市, 州/省, 国家"
- **AND** 示例："东京, 东京都, 日本"、"纽约, 纽约州, 美国"

### Requirement: 搜索结果交互
系统 MUST 提供搜索结果的选择交互，用户 SHALL 能够点击选择城市。

#### Scenario: 点击选择城市
- **WHEN** 用户点击搜索结果中的城市
- **THEN** 输入框填充该城市的标准格式
- **AND** 搜索结果列表关闭
- **AND** 城市的经纬度信息被保存

#### Scenario: 点击外部关闭
- **WHEN** 用户点击搜索结果列表外部区域
- **THEN** 搜索结果列表关闭

### Requirement: 用户输入自动匹配
系统 MUST 在用户未选择搜索结果时自动匹配城市，SHALL 在输入框失焦时触发。

#### Scenario: 自动匹配成功
- **WHEN** 用户输入城市名后直接离开输入框（未选择搜索结果）
- **AND** 输入内容能匹配到城市
- **THEN** 系统自动将输入替换为匹配城市的标准格式
- **AND** 保存对应的经纬度信息

#### Scenario: 自动匹配失败
- **WHEN** 用户输入内容无法匹配到任何城市
- **THEN** 保留用户原始输入
- **AND** 可选：显示提示信息

### Requirement: 逗号格式兼容
系统 MUST 同时支持中文逗号（，）和英文逗号（,）作为分隔符。

#### Scenario: 中文逗号输入
- **WHEN** 用户输入包含中文逗号的城市（如"北京，北京，中国"）
- **THEN** 系统能正确解析并匹配

#### Scenario: 英文逗号输入
- **WHEN** 用户输入包含英文逗号的城市（如"北京,北京,中国"）
- **THEN** 系统能正确解析并匹配

#### Scenario: 混合逗号输入
- **WHEN** 用户输入包含混合逗号的城市
- **THEN** 系统能正确解析并匹配

### Requirement: 本地搜索性能
系统 MUST 在本地完成城市搜索，搜索响应时间 SHALL 小于 100ms。

#### Scenario: 搜索响应时间
- **WHEN** 用户输入搜索关键词
- **THEN** 搜索结果在 100ms 内显示
- **AND** 无明显界面卡顿

#### Scenario: 输入防抖
- **WHEN** 用户快速连续输入
- **THEN** 系统使用防抖机制（约 300ms）
- **AND** 只在用户停止输入后执行搜索

## MODIFIED Requirements

（无现有需求需要修改）

## REMOVED Requirements

（无需求需要移除）
