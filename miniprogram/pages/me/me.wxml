<view class="page-container">
  <view class="nav-placeholder" style="height: {{statusBarHeight + 44}}px"></view>

  <view class="menu-view">
    <!-- 用户头部 -->
    <view class="user-header ink-border" bindtap="goToProfile">
      <view class="avatar-wrap">
        <image class="avatar" src="{{avatarUrl}}" mode="aspectFill" wx:if="{{avatarUrl}}"></image>
        <view class="avatar placeholder" wx:else>
          <text class="avatar-text">U</text>
        </view>
      </view>
      <view class="user-info">
        <view class="name-row">
          <text class="user-name font-ancient">{{userProfile.name || '星语用户'}}</text>
          <text class="name-chevron">></text>
        </view>
        <view class="vip-status-tag" wx:if="{{userProfile.isVip}}">
          <text class="vip-tag-text">尊享会员</text>
        </view>
      </view>
    </view>

    <!-- 会员卡片 -->
    <view class="vip-card ink-border" bindtap="goToSubscription">
      <view class="vip-card-header">
        <text class="vip-card-title font-ancient">会员中心</text>
        <view class="vip-expiry-badge" wx:if="{{userProfile.isVip && userProfile.vipExpireDate}}">
          <text class="expiry-text">{{userProfile.vipExpireDate}} 到期</text>
        </view>
        <view class="vip-expiry-badge" wx:elif="{{!userProfile.isVip}}">
          <text class="expiry-text">开通会员</text>
        </view>
      </view>
      <view class="vip-card-link">
        <text class="link-text">查看专属权益 ></text>
      </view>
    </view>

    <!-- 统计卡片 -->
    <view class="stats-card ink-border">
      <view class="stat-item" bindtap="goToPoints" wx:if="{{!auditMode}}">
        <text class="stat-value font-ancient">{{userProfile.points || 0}}</text>
        <text class="stat-label">积分</text>
      </view>
      <view class="stat-divider" wx:if="{{!auditMode}}"></view>
      <view class="stat-item" bindtap="goToReports">
        <text class="stat-value font-ancient">{{userProfile.reportCount || 0}}</text>
        <text class="stat-label">收藏</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item" bindtap="goToRecords">
        <text class="stat-value font-ancient">{{userProfile.matchCount || 0}}</text>
        <text class="stat-label">分析</text>
      </view>
    </view>

    <!-- 菜单列表 -->
    <view class="menu-list ink-border">
      <view class="menu-list-item" bindtap="handleEditBirthInfo">
        <text class="menu-item-label">编辑出生资料</text>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item" bindtap="goToProfile">
        <text class="menu-item-label">个人资料</text>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item" bindtap="goToOrders">
        <text class="menu-item-label">订单管理</text>
        <text class="menu-item-chevron">></text>
      </view>
    </view>

    <!-- 协议与设置 -->
    <view class="menu-list ink-border">
      <view class="menu-list-item" bindtap="goToAgreement" data-type="terms">
        <text class="menu-item-label">用户协议</text>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item" bindtap="goToAgreement" data-type="privacy">
        <text class="menu-item-label">隐私政策</text>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item logout-item" bindtap="handleLogout">
        <text class="menu-item-label">退出登录</text>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item danger-item" bindtap="handleDeleteAccount">
        <text class="menu-item-label">注销账号</text>
        <text class="menu-item-chevron">></text>
      </view>
    </view>
  </view>
</view>
