<view class="page-container">
  <!-- 顶部状态栏和导航栏占位 -->
  <view class="nav-placeholder" style="height: {{statusBarHeight + 44}}px"></view>
  
  <view wx:if="{{currentRoute === 'menu'}}" class="menu-view">
    <!-- 用户信息头部 -->
    <view class="user-header">
      <view class="avatar-wrap">
        <image class="avatar" src="{{avatarUrl}}" mode="aspectFill" wx:if="{{avatarUrl}}"></image>
        <view class="avatar placeholder" wx:else>
          <text class="avatar-text">U</text>
        </view>
        <view class="vip-badge-small" wx:if="{{userProfile.isVip}}">
          <text class="vip-icon-small">🛡️</text>
        </view>
      </view>
      <view class="user-info">
        <view class="name-row">
          <text class="user-name">{{userProfile.name || '星智用户'}}</text>
          <text class="chevron-right">></text>
        </view>
        <view class="vip-status-tag" wx:if="{{userProfile.isVip}}">
          <text class="vip-tag-text">VIP 订阅会员</text>
        </view>
      </view>
    </view>

    <!-- VIP 会员卡片 -->
    <view class="vip-card" bindtap="handleNav" data-route="subscription">
      <view class="vip-card-header">
        <view class="vip-title-group">
          <text class="vip-card-title">VIP 会员</text>
          <text class="vip-card-icon">👑</text>
        </view>
        <view class="vip-expiry-badge" wx:if="{{userProfile.isVip}}">
          <text class="expiry-text">{{userProfile.vipExpireDate}} 到期</text>
        </view>
      </view>
      <view class="vip-card-link">
        <text class="link-text">查看您的专属会员权益</text>
        <text class="link-chevron">></text>
      </view>
      
      <view class="vip-benefits">
        <view class="benefit-item">
          <view class="benefit-icon-bg benefit-gold">
            <text class="benefit-icon">✨</text>
          </view>
          <text class="benefit-label">专业解答</text>
        </view>
        <view class="benefit-divider"></view>
        <view class="benefit-item">
          <view class="benefit-icon-bg benefit-brown">
            <text class="benefit-icon">🧠</text>
          </view>
          <text class="benefit-label">深度心理</text>
        </view>
        <view class="benefit-divider"></view>
        <view class="benefit-item">
          <view class="benefit-icon-bg benefit-light-gold">
            <text class="benefit-icon">🧡</text>
          </view>
          <text class="benefit-label">缘分合盘</text>
        </view>
      </view>
    </view>

    <!-- 数据统计卡片 -->
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-value">{{userProfile.points || 0}}</text>
        <text class="stat-label">积分</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item" bindtap="handleNav" data-route="reports">
        <text class="stat-value">{{userProfile.reportCount || 0}}</text>
        <text class="stat-label">收藏报告</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item" bindtap="handleNav" data-route="records">
        <text class="stat-value">{{userProfile.matchCount || 0}}</text>
        <text class="stat-label">合盘记录</text>
      </view>
    </view>

    <!-- 功能列表 -->
    <view class="menu-list">
      <view class="menu-list-item" bindtap="handleNav" data-route="settings">
        <view class="menu-item-left">
          <view class="menu-icon-bg">
            <text class="menu-icon">⚙️</text>
          </view>
          <text class="menu-item-label">偏好设置</text>
        </view>
        <text class="menu-item-chevron">></text>
      </view>
      <view class="menu-list-item" bindtap="handleNav" data-route="help">
        <view class="menu-item-left">
          <view class="menu-icon-bg">
            <text class="menu-icon">💬</text>
          </view>
          <text class="menu-item-label">帮助与反馈</text>
        </view>
        <text class="menu-item-chevron">></text>
      </view>
    </view>

    <!-- 退出登录 -->
    <view class="menu-list logout-list">
      <view class="menu-list-item" bindtap="handleLogout">
        <view class="menu-item-left">
          <view class="menu-icon-bg logout-icon-bg">
            <text class="menu-icon">↳</text>
          </view>
          <text class="menu-item-label logout-label">退出登录</text>
        </view>
        <text class="menu-item-chevron">></text>
      </view>
    </view>
  </view>

  <view wx:if="{{currentRoute !== 'menu'}}" class="sub-view">
    <view class="sub-header">
      <view class="back-btn" bindtap="handleBack">返回</view>
      <text class="sub-title">{{routeTitle}}</text>
      <view class="sub-placeholder"></view>
    </view>
    <view class="sub-content">
      <text class="sub-desc">该功能正在完善中，请稍后再试。</text>
    </view>
  </view>
</view>
