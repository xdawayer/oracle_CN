/* pages/cbt/cbt.wxss — 心情日记 */

/* ===== Page Root ===== */
.page-root {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: var(--paper-100);
  overflow: hidden;
}

.content-scroll {
  flex: 1;
  overflow: hidden;
}

.scroll-bottom-spacer {
  height: 200rpx;
}

/* ===== Dashboard ===== */
.dashboard-content {
  padding: var(--spacing-xl) var(--spacing-lg) 0;
}

.page-header {
  margin-bottom: var(--spacing-xl);
}

.page-title {
  display: block;
  font-size: 52rpx;
  color: var(--ink-deep);
  letter-spacing: 6rpx;
}

.page-subtitle {
  display: block;
  font-size: 22rpx;
  color: var(--ink-light);
  margin-top: 8rpx;
  letter-spacing: 2rpx;
}

/* ===== Calendar ===== */
.calendar-card {
  background-color: var(--paper-50);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.calendar-header {
  text-align: center;
  margin-bottom: var(--spacing-md);
}

.month-title {
  font-size: 30rpx;
  color: var(--ink-deep);
  letter-spacing: 4rpx;
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  margin-bottom: var(--spacing-sm);
}

.weekday-label {
  text-align: center;
  font-size: 20rpx;
  color: var(--ink-light);
  letter-spacing: 2rpx;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4rpx;
}

.day-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 0;
  padding-bottom: 100%;
  position: relative;
  aspect-ratio: 1;
}

.day-cell.empty {
  visibility: hidden;
}

.day-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60rpx;
  height: 60rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--paper-200);
  border-radius: 50%;
}

.day-content.current {
  background-color: var(--ink-deep);
}

.day-content.current .day-number {
  color: var(--paper-50);
}

.day-number {
  font-size: 22rpx;
  color: var(--ink-medium);
}

.mood-dot {
  width: 16rpx;
  height: 16rpx;
  background-color: var(--ink-deep);
  border-radius: 50%;
}

.mood-dot.mood-group-happy { background-color: var(--success); }
.mood-dot.mood-group-calm { background-color: var(--info); }
.mood-dot.mood-group-sad { background-color: var(--danger); }
.mood-dot.mood-group-angry { background-color: var(--warning); }
.mood-dot.mood-group-confused { background-color: var(--ink-medium); }

/* ===== History Cards ===== */
.history-section {
  margin-top: var(--spacing-md);
}

.history-card {
  background-color: var(--paper-50);
  border-radius: 16rpx;
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
}

.history-card-main {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.history-card-emoji {
  font-size: 72rpx;
  line-height: 1;
  flex-shrink: 0;
}

.history-card-info {
  flex: 1;
  min-width: 0;
}

.history-card-date {
  display: block;
  font-size: 24rpx;
  color: var(--ink-medium);
  letter-spacing: 1rpx;
}

.history-card-mood-row {
  display: flex;
  align-items: baseline;
  gap: var(--spacing-sm);
  margin-top: 4rpx;
}

.history-card-mood-label {
  font-size: 36rpx;
  font-weight: 700;
  letter-spacing: 2rpx;
}

/* 心情组颜色 */
.mood-color-happy { color: #F5A623; }
.mood-color-calm { color: #7EB8DA; }
.mood-color-sad { color: #E57373; }
.mood-color-angry { color: #FF8A65; }
.mood-color-confused { color: #A0A0A0; }

.history-card-time {
  font-size: 22rpx;
  color: var(--ink-light);
}

.history-card-tags {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6rpx;
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-sm);
}

.history-tag {
  font-size: 24rpx;
  color: var(--ink-medium);
}

.history-tag-dot {
  font-size: 24rpx;
  color: var(--ink-water);
  margin: 0 2rpx;
}

/* 缺少天数间隔 */
.history-gap {
  text-align: center;
  padding: var(--spacing-sm) 0;
  margin-bottom: var(--spacing-md);
}

.history-gap-text {
  font-size: 22rpx;
  color: var(--ink-light);
  letter-spacing: 2rpx;
}

/* ===== Empty State ===== */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-xxl) 0;
}

.empty-text {
  font-size: 28rpx;
  color: var(--ink-light);
  letter-spacing: 4rpx;
}

.empty-hint {
  font-size: 22rpx;
  color: var(--ink-water);
  margin-top: var(--spacing-sm);
}

/* ===== Record Content ===== */
.record-content {
  padding: var(--spacing-lg);
}

.section-block {
  margin-bottom: var(--spacing-xl);
}

.section-title {
  display: block;
  font-size: 34rpx;
  color: var(--ink-deep);
  letter-spacing: 4rpx;
  margin-bottom: var(--spacing-sm);
  line-height: 1.4;
}

.section-hint {
  display: block;
  font-size: 22rpx;
  color: var(--ink-light);
  margin-bottom: var(--spacing-md);
  letter-spacing: 2rpx;
}

/* ===== ① 心情组 Emoji 网格 ===== */
.mood-group-grid {
  display: flex;
  justify-content: space-between;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-md);
}

.mood-group-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8rpx;
  padding: var(--spacing-md) 0;
  background-color: var(--paper-50);
  border: 2rpx solid transparent;
  transition: all 0.2s ease;
}

.mood-group-item.selected {
  background-color: var(--paper-200);
  border-color: var(--ink-deep);
}

.mood-group-emoji {
  font-size: 48rpx;
  line-height: 1;
}

.mood-group-label {
  font-size: 22rpx;
  color: var(--ink-medium);
  letter-spacing: 2rpx;
}

.mood-group-item.selected .mood-group-label {
  color: var(--ink-deep);
}

/* ===== ② 情绪细分网格 ===== */
.mood-detail-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
}

.mood-detail-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
  padding: var(--spacing-md);
  background-color: var(--paper-50);
  border: 2rpx solid transparent;
  transition: all 0.2s ease;
}

.mood-detail-item.selected {
  background-color: var(--paper-200);
  border-color: var(--ink-deep);
}

.mood-detail-emoji {
  font-size: 36rpx;
  line-height: 1;
}

.mood-detail-label {
  font-size: 26rpx;
  color: var(--ink-deep);
  letter-spacing: 2rpx;
}

.mood-detail-desc {
  font-size: 20rpx;
  color: var(--ink-light);
}

/* 其他组折叠头 */
.other-group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) var(--spacing-md);
  margin-top: var(--spacing-sm);
  background-color: var(--paper-50);
}

.other-group-label {
  font-size: 24rpx;
  color: var(--ink-medium);
  letter-spacing: 2rpx;
}

.group-arrow {
  font-size: 32rpx;
  color: var(--ink-light);
  transition: transform 0.2s ease;
}

.group-arrow.open {
  transform: rotate(90deg);
}

/* ===== ③ 场景 & ⑤ 身体标签网格 ===== */
.tag-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
}

.tag-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
  padding: var(--spacing-md) var(--spacing-xs);
  background-color: var(--paper-50);
  border: 2rpx solid transparent;
  transition: all 0.2s ease;
}

.tag-item.selected {
  background-color: var(--paper-200);
  border-color: var(--ink-deep);
}

.tag-emoji {
  font-size: 32rpx;
  line-height: 1;
}

.tag-label {
  font-size: 22rpx;
  color: var(--ink-medium);
  letter-spacing: 2rpx;
}

.tag-item.selected .tag-label {
  color: var(--ink-deep);
}

/* ===== ④ 睡眠网格 ===== */
.sleep-grid {
  display: flex;
  justify-content: space-between;
  gap: var(--spacing-sm);
  margin-top: var(--spacing-sm);
}

.sleep-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4rpx;
  padding: var(--spacing-md) 0;
  background-color: var(--paper-50);
  border: 2rpx solid transparent;
  transition: all 0.2s ease;
}

.sleep-item.selected {
  background-color: var(--paper-200);
  border-color: var(--ink-deep);
}

.sleep-emoji {
  font-size: 36rpx;
  line-height: 1;
}

.sleep-label {
  font-size: 22rpx;
  color: var(--ink-medium);
  letter-spacing: 2rpx;
}

.sleep-item.selected .sleep-label {
  color: var(--ink-deep);
}

/* ===== ⑥ 补充输入 ===== */
.note-textarea {
  width: 100%;
  min-height: 120rpx;
  background-color: var(--paper-50);
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: 28rpx;
  color: var(--ink-dark);
  box-sizing: border-box;
  margin-top: var(--spacing-sm);
  line-height: 1.6;
}

.note-textarea::placeholder {
  color: var(--ink-water);
}

/* ===== Result Report ===== */
.result-content {
  padding: var(--spacing-lg);
  min-height: 100%;
}

.result-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding-top: 40vh;
  gap: var(--spacing-md);
}

/* 报告头部 */
.result-header {
  text-align: center;
  padding: var(--spacing-xl) 0 var(--spacing-lg);
}

.result-header-emoji {
  display: block;
  font-size: 72rpx;
  line-height: 1;
  margin-bottom: var(--spacing-sm);
}

.result-header-title {
  display: block;
  font-size: 44rpx;
  color: var(--ink-deep);
  letter-spacing: 6rpx;
  margin-bottom: 8rpx;
}

.result-header-date {
  display: block;
  font-size: 22rpx;
  color: var(--ink-light);
  letter-spacing: 2rpx;
}

/* 记录摘要卡片 */
.record-summary {
  background-color: var(--paper-50);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.summary-title {
  display: block;
  font-size: 26rpx;
  color: var(--ink-dark);
  letter-spacing: 4rpx;
  margin-bottom: var(--spacing-md);
}

.summary-row {
  font-size: 26rpx;
  color: var(--ink-medium);
  line-height: 1.8;
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
}

.summary-body-tag {
  font-size: 24rpx;
  color: var(--ink-medium);
}

.summary-note {
  font-size: 24rpx;
  color: var(--ink-light);
  font-style: italic;
  margin-top: 4rpx;
}

/* Section 容器 */
.report-section {
  margin-bottom: var(--spacing-xl);
}

.report-section-title {
  display: block;
  font-size: 30rpx;
  color: var(--ink-deep);
  letter-spacing: 4rpx;
  margin-bottom: var(--spacing-md);
}

/* 内容卡片（左侧红色边线） */
.report-card {
  background-color: var(--paper-50);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  border-left: 6rpx solid var(--accent, var(--ink-deep));
}

.card-title {
  display: block;
  font-size: 28rpx;
  color: var(--ink-dark);
  letter-spacing: 2rpx;
  margin-bottom: var(--spacing-sm);
}

.card-content {
  display: block;
  font-size: 26rpx;
  color: var(--ink-medium);
  line-height: 1.8;
}

.card-astro-basis {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-sm);
  border-top: 1rpx solid var(--border-color);
  display: flex;
  align-items: baseline;
  gap: var(--spacing-sm);
}

.astro-basis-label {
  font-size: 20rpx;
  color: var(--paper-50);
  background-color: var(--ink-deep);
  padding: 2rpx 10rpx;
  letter-spacing: 2rpx;
  flex-shrink: 0;
}

.astro-basis-text {
  font-size: 22rpx;
  color: var(--ink-light);
  line-height: 1.6;
}

/* 建议列表 */
.tips-card {
  background-color: var(--paper-50);
  padding: var(--spacing-lg);
  border-left: 6rpx solid var(--accent, var(--ink-deep));
}

.tip-item {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.tip-item:last-child {
  margin-bottom: 0;
}

.tip-bullet {
  width: 40rpx;
  height: 40rpx;
  background-color: var(--ink-deep);
  color: var(--paper-50);
  font-size: 22rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  flex-shrink: 0;
}

.tip-text {
  font-size: 26rpx;
  color: var(--ink-medium);
  line-height: 1.8;
  flex: 1;
}

/* 温暖寄语 */
.report-closing {
  background-color: var(--paper-50);
  padding: var(--spacing-xl) var(--spacing-lg);
  text-align: center;
}

.closing-text {
  font-size: 28rpx;
  color: var(--ink-dark);
  line-height: 1.8;
  letter-spacing: 2rpx;
}

.spinner {
  width: 40rpx;
  height: 40rpx;
  border: 3rpx solid var(--paper-300);
  border-top-color: var(--ink-deep);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  font-size: 22rpx;
  color: var(--ink-light);
  letter-spacing: 2rpx;
}

/* ===== Bottom Bar ===== */
.bottom-bar {
  background-color: var(--paper-100);
  border-top: 1rpx solid var(--border-color);
  padding: var(--spacing-md) var(--spacing-lg);
  padding-bottom: calc(var(--spacing-md) + env(safe-area-inset-bottom));
}

.bottom-bar-inner {
  display: flex;
  gap: var(--spacing-md);
}

.action-btn {
  flex: none;
  padding: 24rpx 40rpx;
  font-size: 28rpx;
  letter-spacing: 4rpx;
  text-align: center;
  border: none;
  line-height: 1.4;
  background-color: transparent;
}

.action-btn::after {
  border: none;
}

.primary-btn {
  flex: 1;
  background-color: var(--ink-deep);
  color: var(--paper-50);
}

.primary-btn:active {
  opacity: 0.8;
}

.secondary-btn {
  background-color: var(--paper-200);
  color: var(--ink-medium);
}

.secondary-btn:active {
  background-color: var(--paper-300);
}

.flex-grow {
  flex: 2;
}

/* ===== Animation ===== */
.fade-in {
  animation: zenFadeInUp 0.4s cubic-bezier(0.25, 0.1, 0.25, 1.0) both;
}
