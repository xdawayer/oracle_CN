<view class="page-container">
  <!-- 用户信息头部 -->
  <view class="user-header">
    <image class="user-avatar" src="{{avatarUrl}}" mode="aspectFill" wx:if="{{avatarUrl}}"></image>
    <view class="user-avatar placeholder" wx:else>
      <text>U</text>
    </view>
    <view class="user-info">
      <text class="user-name font-ancient">{{userName}}</text>
      <text class="user-vip-status">{{isVip ? '尊享 VIP 会员' : '普通用户'}}{{isVip && vipExpireDate ? ' · ' + vipExpireDate + ' 到期' : ''}}</text>
    </view>
  </view>

  <!-- 套餐选择 -->
  <view class="plans-section">
    <view class="plan-card ink-border {{selectedPlan === 'monthly' ? 'selected' : ''}}" bindtap="onSelectPlan" data-plan="monthly">
      <view class="plan-badge">首月特惠</view>
      <text class="plan-name">连续包月</text>
      <view class="plan-price-row">
        <text class="plan-currency">¥</text>
        <text class="plan-price font-ancient">9.9</text>
      </view>
      <text class="plan-original">¥30</text>
    </view>

    <view class="plan-card ink-border {{selectedPlan === 'yearly' ? 'selected' : ''}}" bindtap="onSelectPlan" data-plan="yearly">
      <view class="plan-badge best">最超值</view>
      <text class="plan-name">年度会员</text>
      <view class="plan-price-row">
        <text class="plan-currency">¥</text>
        <text class="plan-price font-ancient">128</text>
      </view>
      <text class="plan-original">¥360</text>
    </view>

    <view class="plan-card ink-border {{selectedPlan === 'quarterly' ? 'selected' : ''}}" bindtap="onSelectPlan" data-plan="quarterly">
      <text class="plan-name">季度会员</text>
      <view class="plan-price-row">
        <text class="plan-currency">¥</text>
        <text class="plan-price font-ancient">45</text>
      </view>
      <text class="plan-original">¥90</text>
    </view>
  </view>

  <!-- 会员权益 -->
  <view class="benefits-section ink-border">
    <view class="benefits-title">
      <text class="benefits-title-text font-ancient">会员专属权益</text>
    </view>

    <view class="benefit-item" wx:for="{{benefits}}" wx:key="title">
      <view class="benefit-icon-wrap">
        <text class="benefit-icon">{{item.icon}}</text>
      </view>
      <view class="benefit-content">
        <text class="benefit-name">{{item.title}}</text>
        <text class="benefit-desc">{{item.desc}}</text>
      </view>
    </view>
  </view>

  <!-- 底部占位（给固定按钮留空间） -->
  <view style="height: 200rpx;"></view>

  <!-- 底部固定按钮 -->
  <view class="bottom-bar">
    <view class="pay-btn {{!agreedTerms ? 'disabled' : ''}}" bindtap="onPay">
      <text class="pay-btn-text">{{isVip ? '续费会员' : '开通会员'}} ¥{{selectedPrice}}</text>
    </view>
    <view class="terms-row" bindtap="onToggleTerms">
      <view class="checkbox {{agreedTerms ? 'checked' : ''}}">
        <text wx:if="{{agreedTerms}}">✓</text>
      </view>
      <text class="terms-text">同意</text>
      <text class="terms-link" catchtap="goToVipAgreement">《会员服务协议》</text>
    </view>
  </view>
</view>
