/**
 * 月度运势深度解读 - 模块B：分维度运势
 *
 * 输出约 1000-1500 字，纯 Markdown 文本
 */

import type { PromptTemplate, PromptContext } from '../../core/types';
import {
  MONTHLY_REPORT_SYSTEM_PROMPT,
  MONTHLY_REPORT_OUTPUT_INSTRUCTION,
  buildTransitDataText,
  buildPreviousSummariesText,
} from './system';

export const monthlyDimensionsPrompt: PromptTemplate = {
  meta: {
    id: 'monthly-dimensions',
    version: '1.0',
    module: 'monthly',
    priority: 'P0',
    description: '月度运势深度解读 - 分维度运势',
    lastUpdated: '2026-02-02',
  },
  system: MONTHLY_REPORT_SYSTEM_PROMPT,
  user: (ctx: PromptContext) => {
    const transitText = buildTransitDataText(ctx);
    const summaries = buildPreviousSummariesText(ctx);

    return `## 行运数据包
${transitText}
${summaries}

## 你的任务
你正在为用户撰写月度运势报告的「分维度运势」章节。

用户按自己最关心的维度快速定位阅读，共 6 个维度。

## 总体规则
- 每个维度独立成段
- 篇幅根据本月该维度行运的重要程度动态调整：
  · 本月高亮维度（行运强度 ★★★ 以上）：250-350 字
  · 本月普通维度（行运强度 ★★）：150-200 字
  · 本月平静维度（行运强度 ★）：80-120 字
- 不要每个维度都写一样长，篇幅分配要反映重要程度差异

## 各维度写作指令

### 维度一：事业/学业
聚焦数据：行运过境 10 宫/6 宫的行星、与 MC 的行运相位、土星/木星当月行运
写作框架：
① 本月事业能量定性（扩张期/稳定期/调整期/突破期/蛰伏期）
② 在工作中你会感受到什么？要具体，不说"你会有好的工作机会"
③ 适合做什么 + 不适合做什么，明确给出行动指南和时间窗口
④ 如果有水逆/火逆影响工作领域，给出具体提醒
⑤ 如果当月是考试季（6-7 月/12-1 月），额外加 1-2 句学业建议

### 维度二：爱情/关系
聚焦数据：金星当月位置和相位、行运过境 5/7/8 宫的行星、火星状态
写作框架：
① 本月感情能量定性（桃花活跃期/深化期/考验期/平淡稳定期/反思期）
② 分「单身」和「有伴」两种情境各给建议
③ 本月感情关键日期

### 维度三：财务
聚焦数据：行运过境 2/8 宫的行星、木星/金星与财务宫位的相位
写作框架：
① 本月财务能量定性
② 本月的财务节奏（什么时候适合谈薪资/签合同、什么时候容易有意外支出）
③ 简短实用建议
④ 末尾附：「以上内容不构成投资、理财或财务决策建议，请结合个人实际情况判断。」

### 维度四：社交/人际
聚焦数据：行运过境 3/7/11 宫的行星、水星状态
写作框架：
① 社交活跃度（高/中/低）
② 适合拓展人脉还是深化已有关系？
③ 需要注意的人际摩擦点

### 维度五：健康/精力
聚焦数据：火星状态、行运过境 1/6/12 宫的行星、困难相位密集程度
写作框架：
① 本月精力水平
② 精力高峰期和低谷期
③ 适合的运动/休息方式
④ 末尾附：「本内容不构成医学建议，如有健康问题请咨询专业医疗人员。」

### 维度六：内在成长/灵性
聚焦数据：行运过境 12/9/8 宫的行星、海王星/冥王星的当月相位
写作框架：
① 本月适合反思什么主题？
② 推荐的自我探索方式（写日记/冥想/独处/阅读方向）
③ 本月灵感高峰期

## 字数：全部 6 个维度加起来 1000-1500 字

${MONTHLY_REPORT_OUTPUT_INSTRUCTION}

直接输出内容，不要加代码块。`;
  },
};
